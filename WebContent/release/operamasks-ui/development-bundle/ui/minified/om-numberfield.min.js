(function(a){var b=function(e,i,f){var d=e.indexOf("."),h;if(isNaN(e)&&e!="."){for(;isNaN(e);){e=e.substring(0,e.length-1)}}if(!f.allowNegative&&(h=e.indexOf("-"))!=-1){var g=e.split("-");e=g.join("")}if(!f.allowDecimals&&d!=-1){return e.substring(0,d)}if(d!=-1){e=e.substring(0,d+f.decimalPrecision+1)}return e};a.widget("om.omNumberField",{options:{allowDecimals:true,allowNegative:true,decimalPrecision:2,disabled:false,readOnly:false},_create:function(){var c=this.options;this.element.addClass("om-numberfield om-widget om-state-default om-state-nobg");if(typeof c.disabled!=="boolean"){this.options.disabled=this.element.prop("disabled")}if(typeof c.readOnly!=="boolean"){this.options.readOnly=this.element.attr("readOnly")}if(this.element.is(":disabled")){this.options.disabled=true}this.element.bind("keypress",function(h){if(h.which==null&&(h.charCode!=null||h.keyCode!=null)){h.which=h.charCode!=null?h.charCode:h.keyCode}var d=h.which;if(d===8||(d==46&&h.button==-1)||d===0){return}var g=String.fromCharCode(d);a.data(this,"character",g);var f=a(this).val()+g;var i=a.data(this,"allowed");if(i.indexOf(g)===-1||(a(this).val().indexOf("-")!==-1&&g=="-")||(a(this).val().indexOf(".")!==-1&&g==".")){h.preventDefault()}}).bind("focus",function(){a(this).addClass("om-state-focus")}).bind("blur",function(){a(this).removeClass("om-state-focus");var d=a.data(this,"character");this.value=b(this.value,d,c)}).bind("mouseenter mouseout",function(){a(this).toggleClass("om-state-hover")});this._setOption("disabled",c.disabled)},_setOption:function(c,d){this._buildAllowChars();if(c==="disabled"){if(d){this.element.attr("disabled",true);this.element.addClass("om-numberfield-disabled")}else{this.element.attr("disabled",false);this.element.removeClass("om-numberfield-disabled")}return}},_buildAllowChars:function(){var c="0123456789";if(this.options.allowDecimals){c=c+"."}if(this.options.allowNegative){c=c+"-"}if(this.options.readOnly){c=""}a.data(this.element[0],"allowed",c)}})})(jQuery);